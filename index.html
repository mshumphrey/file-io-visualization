<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Java File I/O Visualization</title>
    <!-- Load Tailwind CSS --><script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for arrows and animations */
        .flow-arrow {
            position: absolute;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            z-index: 10;
            /* Positioned to overlay the top diagram area */
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none; /* Allow clicks through */
        }
        .flow-arrow.visible {
            opacity: 1;
        }
        .data-packet {
            animation: moveData 2s linear infinite;
        }
        /* Animation for data moving from Java to File */
        @keyframes moveData {
            0% {
                offset-distance: 0%;
            }
            100% {
                offset-distance: 100%;
            }
        }
        /* Animation for data moving from File to Java */
        .data-packet-read {
            animation: moveDataRead 2s linear infinite;
        }
        @keyframes moveDataRead {
            0% {
                offset-distance: 0%; /* Start at file */
            }
            100% {
                offset-distance: 100%; /* End at program */
            }
        }

        #file-icon-group {
            transition: opacity 0.5s ease-in-out;
            opacity: 0; /* Initially hidden */
        }

        #viz-area.created #file-icon-group {
            opacity: 1; /* Show when 'created' class is added */
        }

        /* Simple icon styles */
        .icon-box {
            @apply w-40 h-40 bg-white border-2 border-gray-300 rounded-lg shadow-lg flex flex-col items-center justify-center p-4;
        }
        .icon-box-sm {
            @apply w-20 h-20 bg-white border-2 border-gray-300 rounded-lg shadow-md flex items-center justify-center;
        }

        /* Styles for the code snippet */
        #code-snippet-container {
            /* No longer absolute - centered by flex parent */
            width: 90%;
            max-width: 500px;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        #code-snippet-container.visible {
            opacity: 1;
        }
        .code-block {
            @apply bg-gray-900 text-white text-xs sm:text-sm p-4 rounded-lg shadow-xl;
        }
        .code-block pre {
            @apply m-0;
        }
        .code-block code {
            @apply font-mono;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center justify-center font-sans p-4">

<div class="w-full max-w-4xl mx-auto">
    <h1 class="text-3xl font-bold text-center text-gray-800 mb-8">Java File Operations Visualization</h1>

    <!-- Main visualization area --><div class="relative w-full bg-white rounded-xl shadow-2xl border border-gray-200" id="viz-area">

    <!-- Top Diagram: Icons and Arrows --><div class="relative flex justify-between items-center p-12 h-64 border-b border-gray-200">
    <!-- 1. IntelliJ Program --><div class="z-20">
    <div class="icon-box text-center">
        <!-- IntelliJ Icon IMG with direct URL --><img src="https://www.helenjoscott.com/wp-content/uploads/2020/09/1200px-IntelliJ_IDEA_Logo.png" alt="IntelliJ IDEA Logo" class="w-16 h-16 mb-2 object-contain" onerror="this.outerHTML='<div class=\'w-16 h-16 mb-2 flex items-center justify-center bg-gray-200 rounded text-gray-500 text-xs\'>[Icon Error]</div>'">
        <span class="font-semibold text-lg">IntelliJ IDEA</span>
        <span class="text-sm text-gray-500">YourCode.java</span>
    </div>
</div>

    <!-- 2. File --><div class="z-20">
    <!-- File Icon --><div id="file-icon-group" class="icon-box text-center">
    <!-- Document Icon SVG --><svg class="w-16 h-16 text-gray-700 mb-2" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor">
    <path d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
</svg>
    <span class="font-semibold text-lg">The File</span>
    <span class="text-sm text-gray-500">MyFile.txt</span>
</div>

    <!-- Deleted Icon (hidden by default) --><div id="deleted-icon-group" class="icon-box text-center opacity-0 absolute top-1/2 right-12 -translate-y-1/2" style="transition: opacity 0.5s ease-in-out;">
    <!-- Trash Icon SVG --><svg class="w-16 h-16 text-red-500 mb-2" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor">
    <path d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
</svg>
    <span class="font-semibold text-lg text-red-500">File Deleted</span>
    <span class="text-sm text-gray-500">MyFile.txt</span>
</div>
</div>

    <!-- 3. Arrows and Data Flows (Overlay) --><!-- CREATE Flow --><div id="flow-create" class="flow-arrow">
    <svg class="w-full h-full">
        <!-- Adjusted path for curved arrow from left icon to right icon --><path d="M 160 128 Q 300 80 640 128" stroke="#2563EB" stroke-width="3" fill="none" stroke-dasharray="8 8" />
        <!-- Arrowhead at the end of the path --><path d="M 630 118 L 640 128 L 630 138" stroke="#2563EB" stroke-width="3" fill="none" />
    </svg>
    <div class="absolute top-[60px] left-1/2 -translate-x-1/2 bg-blue-100 text-blue-800 px-3 py-1 rounded-full font-medium z-10">
        CREATE (`.createNewFile()`)
    </div>
</div>

    <!-- WRITE Flow --><div id="flow-write" class="flow-arrow">
    <svg class="w-full h-full">
        <!-- Adjusted path for curved arrow from left icon to right icon --><path id="write-path" d="M 160 128 Q 300 80 640 128" stroke="#10B981" stroke-width="3" fill="none" />
        <!-- Arrowhead at the end of the path --><path d="M 630 118 L 640 128 L 630 138" stroke="#10B981" stroke-width="3" fill="none" />
    </svg>
    <!-- Data Packet - Added top-0 left-0 --><div class="absolute top-0 left-0 icon-box-sm data-packet" style="offset-path: path('M 160 128 Q 300 80 640 128');">
    <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
    <span class="font-bold text-xs">Data</span>
</div>
    <div class="absolute top-[60px] left-1/2 -translate-x-1/2 bg-green-100 text-green-800 px-3 py-1 rounded-full font-medium z-10">
        WRITE (`FileWriter`)
    </div>
</div>

    <!-- READ Flow --><div id="flow-read" class="flow-arrow">
    <svg class="w-full h-full">
        <!-- Adjusted path for curved arrow from right icon to left icon --><path id="read-path" d="M 640 128 Q 500 176 160 128" stroke="#F59E0B" stroke-width="3" fill="none" />
        <!-- Arrowhead at the end of the path --><path d="M 170 118 L 160 128 L 170 138" stroke="#F59E0B" stroke-width="3" fill="none" />
    </svg>
    <!-- Data Packet - Added top-0 left-0 --><div class="absolute top-0 left-0 icon-box-sm data-packet-read" style="offset-path: path('M 640 128 Q 500 176 160 128');">
    <svg class="w-8 h-8 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
    <span class="font-bold text-xs">Data</span>
</div>
    <div class="absolute top-[186px] left-1/2 -translate-x-1/2 bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full font-medium z-10">
        READ (`FileReader`, `Scanner`)
    </div>
</div>

    <!-- DELETE Flow --><div id="flow-delete" class="flow-arrow">
    <svg class="w-full h-full">
        <!-- Adjusted path for curved arrow from left icon to right icon --><path d="M 160 128 Q 300 80 640 128" stroke="#EF4444" stroke-width="3" fill="none" />
        <!-- Arrowhead at the end of the path --><path d="M 630 118 L 640 128 L 630 138" stroke="#EF4444" stroke-width="3" fill="none" />
    </svg>
    <div class="absolute top-[60px] left-1/2 -translate-x-1/2 bg-red-100 text-red-800 px-3 py-1 rounded-full font-medium z-10">
        DELETE (`.delete()`)
    </div>
</div>
</div>

    <!-- Bottom: Code Snippet --><div class="relative h-64 flex items-center justify-center p-8 bg-gray-50">
    <div id="code-snippet-container">
        <!-- Create Snippet --><div id="code-create" class="code-block" style="display: none;">
                        <pre><code class="language-java">try {
  File myFile = new File("MyFile.txt");
  if (myFile.createNewFile()) {
    System.out.println("File created!");
  } else {
    System.out.println("File already exists.");
  }
} catch (IOException e) {
  System.out.println("Error creating file");
}</code></pre>
    </div>
        <!-- Write Snippet --><div id="code-write" class="code-block" style="display: none;">
                        <pre><code class="language-java">try (FileWriter myWriter = new FileWriter("MyFile.txt")) {
  myWriter.write("I am so sick at coding :)");
  System.out.println("Successfully wrote.");
} catch (IOException e) {
  System.out.println("An error occurred when writing to the file.");
}</code></pre>
    </div>
        <!-- Read Snippet --><div id="code-read" class="code-block" style="display: none;">
                        <pre><code class="language-java">try (Scanner myReader = new Scanner(new File("MyFile.txt"))) {
  while (myReader.hasNextLine()) {
    String data = myReader.nextLine();
    System.out.println(data);
  }
} catch (FileNotFoundException e) {
  System.out.println("An error occurred when reading from the file.");
}</code></pre>
    </div>
        <!-- Delete Snippet --><div id="code-delete" class="code-block" style="display: none;">
                        <pre><code class="language-java">File myFile = new File("MyFile.txt");
if (myFile.delete()) {
  System.out.println("Deleted: " + myFile.getName());
} else {
  System.out.println("Failed to delete.");
}</code></pre>
    </div>
    </div>
</div>

</div>

    <!-- Controls --><div class="flex items-center justify-center gap-4 mt-8">
    <button id="btn-create" class="px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75 transition-all">
        Create
    </button>
    <button id="btn-write" class="px-6 py-3 bg-green-600 text-white font-semibold rounded-lg shadow-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-75 transition-all">
        Write
    </button>
    <button id="btn-read" class="px-6 py-3 bg-yellow-500 text-white font-semibold rounded-lg shadow-md hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:ring-opacity-75 transition-all">
        Read
    </button>
    <button id="btn-delete" class="px-6 py-3 bg-red-600 text-white font-semibold rounded-lg shadow-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-75 transition-all">
        Delete
    </button>
</div>
    <div class="text-center mt-4">
        <button id="btn-reset" class="text-sm text-gray-600 hover:text-gray-800 hover:underline">Reset</button>
    </div>

</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const btnCreate = document.getElementById('btn-create');
        const btnWrite = document.getElementById('btn-write');
        const btnRead = document.getElementById('btn-read');
        const btnDelete = document.getElementById('btn-delete');
        const btnReset = document.getElementById('btn-reset');
        const vizArea = document.getElementById('viz-area');

        const flowCreate = document.getElementById('flow-create');
        const flowWrite = document.getElementById('flow-write');
        const flowRead = document.getElementById('flow-read');
        const flowDelete = document.getElementById('flow-delete');

        const fileIcon = document.getElementById('file-icon-group');
        const deletedIcon = document.getElementById('deleted-icon-group');

        const codeContainer = document.getElementById('code-snippet-container');
        const codeCreate = document.getElementById('code-create');
        const codeWrite = document.getElementById('code-write');
        const codeRead = document.getElementById('code-read');
        const codeDelete = document.getElementById('code-delete');

        const allFlows = [flowCreate, flowWrite, flowRead, flowDelete];
        const allCodeSnippets = [codeCreate, codeWrite, codeRead, codeDelete];

        let deleteTimeout;

        function resetState() {
            // Hide all flows
            allFlows.forEach(flow => flow.classList.remove('visible'));

            // Hide all code
            codeContainer.classList.remove('visible');
            allCodeSnippets.forEach(snippet => snippet.style.display = 'none');

            // Reset file icon visibility
            vizArea.classList.remove('created');
            fileIcon.style.opacity = '0'; // Ensure it's hidden explicitly
            deletedIcon.style.opacity = '0';

            // Clear any pending delete animation
            if (deleteTimeout) {
                clearTimeout(deleteTimeout);
            }
        }

        function showCode(snippet) {
            allCodeSnippets.forEach(s => s.style.display = 'none');
            snippet.style.display = 'block';
            codeContainer.classList.add('visible');
        }

        btnCreate.addEventListener('click', () => {
            resetState();
            vizArea.classList.add('created'); // Show file
            fileIcon.style.opacity = '1'; // Make sure file icon is visible
            deletedIcon.style.opacity = '0'; // Ensure deleted icon is hidden
            flowCreate.classList.add('visible');
            showCode(codeCreate);
        });

        btnWrite.addEventListener('click', () => {
            resetState();
            vizArea.classList.add('created'); // Show file
            fileIcon.style.opacity = '1'; // Make sure file icon is visible
            deletedIcon.style.opacity = '0'; // Ensure deleted icon is hidden
            flowWrite.classList.add('visible');
            showCode(codeWrite);
        });

        btnRead.addEventListener('click', () => {
            resetState();
            vizArea.classList.add('created'); // Show file
            fileIcon.style.opacity = '1'; // Make sure file icon is visible
            deletedIcon.style.opacity = '0'; // Ensure deleted icon is hidden
            flowRead.classList.add('visible');
            showCode(codeRead);
        });

        btnDelete.addEventListener('click', () => {
            resetState();
            // We show the file briefly before it gets deleted
            vizArea.classList.add('created');
            fileIcon.style.opacity = '1';
            deletedIcon.style.opacity = '0';

            flowDelete.classList.add('visible');
            showCode(codeDelete);

            // Animate the deletion
            deleteTimeout = setTimeout(() => {
                fileIcon.style.opacity = '0'; // Hide file
                deletedIcon.style.opacity = '1'; // Show trash
            }, 1000); // 1 second delay
        });

        btnReset.addEventListener('click', resetState);

        // Initial reset
        resetState();
    });
</script>

</body>
</html>
